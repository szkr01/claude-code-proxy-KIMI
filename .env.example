# =============================================================================
# Claude Code Proxy with Kimi OAuth - Environment Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8082

# -----------------------------------------------------------------------------
# Kimi OAuth Configuration (Required)
# -----------------------------------------------------------------------------

# OAuthホスト（通常は変更不要）
KIMI_OAUTH_HOST=https://auth.kimi.com

# Kimi APIベースURL（通常は変更不要）
KIMI_BASE_URL=https://api.kimi.com/coding/v1

# 注意: APIキーは不要です。初回起動時に /auth/login でOAuth認証を行います。
# トークンは ~/.kimi/credentials/kimi-code.json に自動保存されます。

# -----------------------------------------------------------------------------
# Auto Login Settings
# -----------------------------------------------------------------------------

# サーバー起動時に自動的にログインするか（デフォルト: true）
# false に設定すると、手動で /auth/login を実行する必要があります
AUTO_LOGIN=true

# 自動ログイン時にブラウザを自動で開くか（デフォルト: true）
# false に設定すると、ターミナルに表示されたURLを手動で開く必要があります
AUTO_OPEN_BROWSER=true

# -----------------------------------------------------------------------------
# Conversation Logging (Optional)
# -----------------------------------------------------------------------------

# 会話ログを記録するか（デフォルト: false）
# true に設定すると、全ての会話（リクエスト・レスポンス）をJSONファイルに保存します
# セキュリティとプライバシーのため、デフォルトはオフです
# コマンドライン引数 --logging true/false でも制御可能（優先度高）
KIMI_LOG_CONVERSATIONS=false

# 会話ログの保存先ディレクトリ（デフォルト: logs/conversations）
# コマンドライン引数 --log-dir でも指定可能
KIMI_CONVERSATIONS_LOG_DIR=logs/conversations

# -----------------------------------------------------------------------------
# Provider Preference
# -----------------------------------------------------------------------------

# 優先プロバイダー
# - "kimi": Kimiモデルを使用（デフォルト）
# - "openai": OpenAIモデルを使用（フォールバック）
# - "google": Geminiモデルを使用（フォールバック）
# - "anthropic": Anthropicモデルを直接使用
PREFERRED_PROVIDER=kimi

# モデルマッピング（PREFERRED_PROVIDER=kimi の場合は無視されます）
# BIG_MODEL: sonnetにマッピングされるモデル
# SMALL_MODEL: haikuにマッピングされるモデル
BIG_MODEL=kimi-k2-turbo-preview
SMALL_MODEL=kimi-k2-turbo-preview

# -----------------------------------------------------------------------------
# Fallback API Keys (Optional)
# -----------------------------------------------------------------------------

# Kimiが使用できない場合のフォールバック用APIキー
# OPENAI_API_KEY=sk-...
# GEMINI_API_KEY=...
# ANTHROPIC_API_KEY=sk-ant-...

# -----------------------------------------------------------------------------
# OpenAI Base URL (for fallback)
# -----------------------------------------------------------------------------
# OPENAI_BASE_URL=https://api.openai.com/v1

# -----------------------------------------------------------------------------
# Timeout Configuration
# -----------------------------------------------------------------------------

# Kimi API タイムアウト設定（秒）
# 接続タイムアウト: サーバーへの接続確立までの時間
KIMI_TIMEOUT_CONNECT=10.0

# 読み取りタイムアウト: AI応答の待機時間（デフォルト: 600秒 = 10分）
# 複雑な会話やツール呼び出しが多い場合、長い時間がかかる可能性があります
KIMI_TIMEOUT_READ=600.0

# 書き込みタイムアウト: リクエスト送信の時間
KIMI_TIMEOUT_WRITE=10.0

# プールタイムアウト: 接続プールからの接続取得時間
KIMI_TIMEOUT_POOL=10.0

# OAuth認証用タイムアウト（秒、デフォルト: 30秒）
KIMI_AUTH_TIMEOUT=30.0

# -----------------------------------------------------------------------------
# Retry Configuration
# -----------------------------------------------------------------------------

# タイムアウト時の最大リトライ回数（デフォルト: 2回 = 合計3試行）
KIMI_TIMEOUT_RETRY_MAX=2

# リトライ時の初期待機時間（秒、エクスポネンシャルバックオフ）
# 実際の待機時間: delay * (2 ** attempt)
# 例: 1回目=5秒、2回目=10秒
KIMI_TIMEOUT_RETRY_DELAY=5.0

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# LOG_LEVEL=INFO
